plugins {
    id 'org.jetbrains.kotlin.multiplatform' version '1.3.71'
    id 'org.jetbrains.kotlin.plugin.serialization' version '1.3.71'
}
repositories {
    maven { url 'https://dl.bintray.com/kotlin/kotlin-eap' }
    mavenCentral()
}
repositories {
    jcenter()
}
kotlin {
    mingwX64("mingw") {
        binaries {
            sharedLib {
                baseName = "dll4csharp"
            }
            executable {
                entryPoint = 'sample.main'
                runTask?.args('')
            }
        }
    }
    sourceSets {
        mingwMain {
            dependencies {
                implementation "org.jetbrains.kotlin:kotlin-stdlib:1.3.70"
                implementation("org.jetbrains.kotlinx:kotlinx-serialization-runtime-native:0.20.0") // JVM dependency
            }
        }
        mingwTest {
        }
    }
}
